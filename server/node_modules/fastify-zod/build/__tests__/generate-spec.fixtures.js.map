{"version":3,"file":"generate-spec.fixtures.js","names":["main","f","createTestServer","jsonSchemas","buildJsonSchemas","models","swaggerOptions","openApiOptions","transformSpec","options","originalSpec","inject","method","url","then","res","json","writeFile","join","__dirname","JSON","stringify","encoding","transformedSpecJson","body","transformedSpecYaml","catch","error","console","process","exit"],"sources":["../../src/__tests__/generate-spec.fixtures.ts"],"sourcesContent":["import { writeFile } from \"fs/promises\";\nimport { join } from \"path\";\n\nimport { buildJsonSchemas } from \"..\";\n\nimport { models } from \"./models.fixtures\";\nimport { createTestServer, openApiOptions } from \"./server.fixtures\";\n\nconst main = async (): Promise<void> => {\n  const f = createTestServer(\n    {},\n    {\n      jsonSchemas: buildJsonSchemas(models, {}),\n      swaggerOptions: {\n        ...openApiOptions,\n        transformSpec: { options: {} },\n      },\n    },\n  );\n\n  const originalSpec = await f\n    .inject({\n      method: `get`,\n      url: `/documentation/json`,\n    })\n    .then((res) => res.json());\n\n  await writeFile(\n    join(__dirname, `..`, `..`, `openapi.original.json`),\n    JSON.stringify(originalSpec, null, 2),\n    { encoding: `utf-8` },\n  );\n\n  const transformedSpecJson = await f\n    .inject({\n      method: `get`,\n      url: `/documentation_transformed/json`,\n    })\n    .then((res) => res.body);\n\n  await writeFile(\n    join(__dirname, `..`, `..`, `openapi.transformed.json`),\n    transformedSpecJson,\n    { encoding: `utf-8` },\n  );\n\n  const transformedSpecYaml = await f\n    .inject({\n      method: `get`,\n      url: `/documentation_transformed/yaml`,\n    })\n    .then((res) => res.body);\n\n  await writeFile(\n    join(__dirname, `..`, `..`, `openapi.transformed.yml`),\n    transformedSpecYaml,\n    { encoding: `utf-8` },\n  );\n};\n\nmain().catch((error) => {\n  console.error(error);\n  process.exit(1);\n});\n"],"mappings":";;AAAA;;AACA;;AAEA;;AAEA;;AACA;;AAEA,MAAMA,IAAI,GAAG,YAA2B;EACtC,MAAMC,CAAC,GAAG,IAAAC,wBAAA,EACR,EADQ,EAER;IACEC,WAAW,EAAE,IAAAC,kBAAA,EAAiBC,cAAjB,EAAyB,EAAzB,CADf;IAEEC,cAAc,EAAE,EACd,GAAGC,sBADW;MAEdC,aAAa,EAAE;QAAEC,OAAO,EAAE;MAAX;IAFD;EAFlB,CAFQ,CAAV;EAWA,MAAMC,YAAY,GAAG,MAAMT,CAAC,CACzBU,MADwB,CACjB;IACNC,MAAM,EAAG,KADH;IAENC,GAAG,EAAG;EAFA,CADiB,EAKxBC,IALwB,CAKlBC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALU,CAA3B;EAOA,MAAM,IAAAC,mBAAA,EACJ,IAAAC,UAAA,EAAKC,SAAL,EAAiB,IAAjB,EAAuB,IAAvB,EAA6B,uBAA7B,CADI,EAEJC,IAAI,CAACC,SAAL,CAAeX,YAAf,EAA6B,IAA7B,EAAmC,CAAnC,CAFI,EAGJ;IAAEY,QAAQ,EAAG;EAAb,CAHI,CAAN;EAMA,MAAMC,mBAAmB,GAAG,MAAMtB,CAAC,CAChCU,MAD+B,CACxB;IACNC,MAAM,EAAG,KADH;IAENC,GAAG,EAAG;EAFA,CADwB,EAK/BC,IAL+B,CAKzBC,GAAD,IAASA,GAAG,CAACS,IALa,CAAlC;EAOA,MAAM,IAAAP,mBAAA,EACJ,IAAAC,UAAA,EAAKC,SAAL,EAAiB,IAAjB,EAAuB,IAAvB,EAA6B,0BAA7B,CADI,EAEJI,mBAFI,EAGJ;IAAED,QAAQ,EAAG;EAAb,CAHI,CAAN;EAMA,MAAMG,mBAAmB,GAAG,MAAMxB,CAAC,CAChCU,MAD+B,CACxB;IACNC,MAAM,EAAG,KADH;IAENC,GAAG,EAAG;EAFA,CADwB,EAK/BC,IAL+B,CAKzBC,GAAD,IAASA,GAAG,CAACS,IALa,CAAlC;EAOA,MAAM,IAAAP,mBAAA,EACJ,IAAAC,UAAA,EAAKC,SAAL,EAAiB,IAAjB,EAAuB,IAAvB,EAA6B,yBAA7B,CADI,EAEJM,mBAFI,EAGJ;IAAEH,QAAQ,EAAG;EAAb,CAHI,CAAN;AAKD,CAlDD;;AAoDAtB,IAAI,GAAG0B,KAAP,CAAcC,KAAD,IAAW;EACtBC,OAAO,CAACD,KAAR,CAAcA,KAAd;EACAE,OAAO,CAACC,IAAR,CAAa,CAAb;AACD,CAHD"}