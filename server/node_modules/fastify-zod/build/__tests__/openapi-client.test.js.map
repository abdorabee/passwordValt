{"version":3,"file":"openapi-client.test.js","names":["test","f","createTestServer","jsonSchemas","buildJsonSchemas","models","swaggerOptions","openApiOptions","transformSpec","basePath","listen","client","DefaultApi","Configuration","fetchApi","require","tExpect","getTodoItems","resolves","toEqual","todoItems","postTodoItem","schemaTodoItem","id","label","state","SchemaTodoItemState","Todo","dueDateMs","Date","getTime","close"],"sources":["../../src/__tests__/openapi-client.test.ts"],"sourcesContent":["import { tExpect } from \"typed-jest-expect\";\n\nimport {\n  Configuration,\n  DefaultApi,\n  SchemaTodoItemState,\n} from \"../../test-openapi-client\";\nimport { buildJsonSchemas } from \"..\";\n\nimport { models } from \"./models.fixtures\";\nimport { createTestServer, openApiOptions } from \"./server.fixtures\";\n\ntest(`openapi-client`, async () => {\n  const f = createTestServer(\n    {},\n    {\n      jsonSchemas: buildJsonSchemas(models, {}),\n      swaggerOptions: {\n        ...openApiOptions,\n        transformSpec: {},\n      },\n    },\n  );\n\n  const basePath = await f.listen(0);\n\n  try {\n    const client = new DefaultApi(\n      new Configuration({ basePath, fetchApi: require(`node-fetch`) }),\n    );\n\n    await tExpect(client.getTodoItems()).resolves.toEqual({ todoItems: [] });\n\n    await tExpect(\n      client.postTodoItem({\n        schemaTodoItem: {\n          id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n          label: `todo`,\n          state: SchemaTodoItemState.Todo,\n          dueDateMs: new Date(1337).getTime(),\n        },\n      }),\n    ).resolves.toEqual({\n      todoItems: [\n        {\n          id: `e7f7082a-4f16-430d-8c3b-db6b8d4d3e73`,\n          label: `todo`,\n          state: SchemaTodoItemState.Todo,\n          dueDateMs: new Date(1337).getTime(),\n        },\n      ],\n    });\n  } finally {\n    await f.close();\n  }\n});\n"],"mappings":";;AAAA;;AAEA;;AAKA;;AAEA;;AACA;;AAEAA,IAAI,CAAE,gBAAF,EAAmB,YAAY;EACjC,MAAMC,CAAC,GAAG,IAAAC,wBAAA,EACR,EADQ,EAER;IACEC,WAAW,EAAE,IAAAC,kBAAA,EAAiBC,cAAjB,EAAyB,EAAzB,CADf;IAEEC,cAAc,EAAE,EACd,GAAGC,sBADW;MAEdC,aAAa,EAAE;IAFD;EAFlB,CAFQ,CAAV;EAWA,MAAMC,QAAQ,GAAG,MAAMR,CAAC,CAACS,MAAF,CAAS,CAAT,CAAvB;;EAEA,IAAI;IACF,MAAMC,MAAM,GAAG,IAAIC,6BAAJ,CACb,IAAIC,gCAAJ,CAAkB;MAAEJ,QAAF;MAAYK,QAAQ,EAAEC,OAAO,CAAE,YAAF;IAA7B,CAAlB,CADa,CAAf;IAIA,MAAM,IAAAC,wBAAA,EAAQL,MAAM,CAACM,YAAP,EAAR,EAA+BC,QAA/B,CAAwCC,OAAxC,CAAgD;MAAEC,SAAS,EAAE;IAAb,CAAhD,CAAN;IAEA,MAAM,IAAAJ,wBAAA,EACJL,MAAM,CAACU,YAAP,CAAoB;MAClBC,cAAc,EAAE;QACdC,EAAE,EAAG,sCADS;QAEdC,KAAK,EAAG,MAFM;QAGdC,KAAK,EAAEC,sCAAA,CAAoBC,IAHb;QAIdC,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;MAJG;IADE,CAApB,CADI,EASJZ,QATI,CASKC,OATL,CASa;MACjBC,SAAS,EAAE,CACT;QACEG,EAAE,EAAG,sCADP;QAEEC,KAAK,EAAG,MAFV;QAGEC,KAAK,EAAEC,sCAAA,CAAoBC,IAH7B;QAIEC,SAAS,EAAE,IAAIC,IAAJ,CAAS,IAAT,EAAeC,OAAf;MAJb,CADS;IADM,CATb,CAAN;EAmBD,CA1BD,SA0BU;IACR,MAAM7B,CAAC,CAAC8B,KAAF,EAAN;EACD;AACF,CA3CG,CAAJ"}